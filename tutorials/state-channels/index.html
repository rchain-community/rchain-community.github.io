<!DOCTYPE html>
<html data-html-server-rendered="true" lang="en" data-vue-tag="%7B%22lang%22:%7B%22ssr%22:%22en%22%7D%7D">
  <head>
    <meta name="google-site-verification" content="ZLLy5UOPYx66Dl5yzaWabg3CLJNbc4AQuaEEgcB-bRw" />
    <title>State Channels  - Rchain network</title><meta name="gridsome:hash" content="6200e718b0a7d08f38cb7f9d1c53b5227803833e"><meta data-vue-tag="ssr" charset="utf-8"><meta data-vue-tag="ssr" name="generator" content="Gridsome v0.7.23"><meta data-vue-tag="ssr" data-key="viewport" name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"><meta data-vue-tag="ssr" data-key="format-detection" name="format-detection" content="telephone=no"><meta data-vue-tag="ssr" data-key="description" name="description" content="👉 Rholang is an open and scalable blockchain language designed for speed and reliability. Build on latest research from the reflective high order calculus."><link data-vue-tag="ssr" rel="icon" href="data:,"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="16x16" href="/assets/static/favicon.ce0531f.563b6e448255041815a11f28043b4a2a.png"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="32x32" href="/assets/static/favicon.ac8d93a.563b6e448255041815a11f28043b4a2a.png"><link rel="preload" href="/assets/css/1.styles.63b0d45d.css" as="style"><link rel="preload" href="/assets/js/app.7683db69.js" as="script"><link rel="stylesheet" href="/assets/css/1.styles.63b0d45d.css"><style data-vue-tag="ssr" type="text/css">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:112.5%/1.6 'Jost','Helvetica','Helvetica Neue','Segoe UI','Helvetica','Arial',sans-serif;box-sizing:border-box;overflow-y:scroll;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:hsla(0,0%,0%,0.8);font-family:'Jost','Helvetica','Helvetica Neue','Segoe UI','Helvetica','Arial',sans-serif;font-weight:normal;word-wrap:break-word;font-kerning:normal;-moz-font-feature-settings:"kern", "liga", "clig", "calt";-ms-font-feature-settings:"kern", "liga", "clig", "calt";-webkit-font-feature-settings:"kern", "liga", "clig", "calt";font-feature-settings:"kern", "liga", "clig", "calt";}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.6rem;}h1{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.6rem;color:inherit;font-family:'Jost','Helvetica','Helvetica Neue','Segoe UI','Helvetica','Arial',sans-serif;font-weight:bold;text-rendering:optimizeLegibility;font-size:1.9rem;line-height:1.1;}h2{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.6rem;color:inherit;font-family:'Jost','Helvetica','Helvetica Neue','Segoe UI','Helvetica','Arial',sans-serif;font-weight:bold;text-rendering:optimizeLegibility;font-size:1.46978rem;line-height:1.1;}h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.6rem;color:inherit;font-family:'Jost','Helvetica','Helvetica Neue','Segoe UI','Helvetica','Arial',sans-serif;font-weight:bold;text-rendering:optimizeLegibility;font-size:1.29271rem;line-height:1.1;}h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.6rem;color:inherit;font-family:'Jost','Helvetica','Helvetica Neue','Segoe UI','Helvetica','Arial',sans-serif;font-weight:bold;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.1;}h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.6rem;color:inherit;font-family:'Jost','Helvetica','Helvetica Neue','Segoe UI','Helvetica','Arial',sans-serif;font-weight:bold;text-rendering:optimizeLegibility;font-size:0.87953rem;line-height:1.1;}h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.6rem;color:inherit;font-family:'Jost','Helvetica','Helvetica Neue','Segoe UI','Helvetica','Arial',sans-serif;font-weight:bold;text-rendering:optimizeLegibility;font-size:0.82485rem;line-height:1.1;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.6rem;}ul{margin-left:1.6rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.6rem;list-style-position:outside;list-style-image:none;}ol{margin-left:1.6rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.6rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.6rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.6rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.6rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.6rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.6rem;font-size:0.85rem;line-height:1.6rem;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.6rem;font-size:1rem;line-height:1.6rem;border-collapse:collapse;width:100%;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.6rem;}blockquote{margin-left:1.6rem;margin-right:1.6rem;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.6rem;}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.6rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.6rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.6rem;}hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(1.6rem - 1px);background:hsla(0,0%,0%,0.2);border:none;height:1px;}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.6rem;}b{font-weight:bold;}strong{font-weight:bold;}dt{font-weight:bold;}th{font-weight:bold;}li{margin-bottom:calc(1.6rem / 2);}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.6rem;margin-bottom:calc(1.6rem / 2);margin-top:calc(1.6rem / 2);}li > ul{margin-left:1.6rem;margin-bottom:calc(1.6rem / 2);margin-top:calc(1.6rem / 2);}blockquote *:last-child{margin-bottom:0;}li *:last-child{margin-bottom:0;}p *:last-child{margin-bottom:0;}li > p{margin-bottom:calc(1.6rem / 2);}code{font-size:0.85rem;line-height:1.6rem;}kbd{font-size:0.85rem;line-height:1.6rem;}samp{font-size:0.85rem;line-height:1.6rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding-left:1.06667rem;padding-right:1.06667rem;padding-top:0.8rem;padding-bottom:calc(0.8rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}</style><noscript data-vue-tag="ssr"><style>.g-image--loading{display:none;}</style></noscript>
  </head>
  <body >
    
    <script>
      // Add dark / light detection that runs before Vue.js load. Borrowed from overreacted.io
      (function() {
        window.__onThemeChange = function() {};
        function setTheme(newTheme) {
          window.__theme = newTheme;
          preferredTheme = newTheme;
          document.body.setAttribute('data-theme', newTheme);
          window.__onThemeChange(newTheme);
        }

        var preferredTheme;
        try {
          preferredTheme = localStorage.getItem('theme');
        } catch (err) { }

        window.__setPreferredTheme = function(newTheme) {
          setTheme(newTheme);
          try {
            localStorage.setItem('theme', newTheme);
          } catch (err) {}
        }

        var darkQuery = window.matchMedia('(prefers-color-scheme: dark)');

        darkQuery.addListener(function(e) {
          window.__setPreferredTheme(e.matches ? 'dark' : 'light');
        });

        setTheme(preferredTheme || (darkQuery.matches ? 'dark' : 'light'));
      })();
    </script>

    <div id="app" dark="" data-server-rendered="true" class="has-sidebar docs-page"><header><div class="header-inner container flex gap-30"><div oncontextmenu="return false;" class="logo"><a href="/" title="Back to home" class="logo__link active"><img alt="Rholang.org" src="/assets/static/rholang-logo.7ba8522.521690c0ed4db5f7c60f927c2c5e4cc0.svg" width="200" srcset="/assets/static/rholang-logo.7ba8522.521690c0ed4db5f7c60f927c2c5e4cc0.svg 200w" sizes="(max-width: 200px) 100vw, 200px" class="logo__svg hide-for-small g-image"><img alt="Rholang.org" src="/assets/static/rholang-logo-small.7ba8522.4177bad4657dff7dd80533d9c1fffd10.svg" width="200" srcset="/assets/static/rholang-logo-small.7ba8522.4177bad4657dff7dd80533d9c1fffd10.svg 200w" sizes="(max-width: 200px) 100vw, 200px" class="logo__svg show-for-small logo__svg--small g-image"></a></div><nav class="main-nav flex gap-15 flex-fit"><a href="/docs"><span class="main-nav__label">Docs</span></a><a href="/tutorials" class="active"><span class="main-nav__label">Tutorials</span></a><a href="/dapps"><span class="main-nav__label">dApps</span></a><a href="/blog/"><span class="main-nav__label">Blog</span></a></nav><form id="search" class="header-search"><label><input id="search-input" placeholder="Search Rholang docs..." title="Search docs" type="search" class="header-search__input"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="search-icon feather feather-search"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg></label></form><nav class="header-actions flex"><a role="button" aria-label="Toggle dark" title="Toggle dark" class="toggle-theme"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-sun"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg></a><a aria-label="Twitter" href="//twitter.com/rchain_coop?lang=en" rel="noopener noreferrer" target="_blank" title="Join us on twitter" class="hide-for-small"><svg width="18" height="18" viewBox="0 0 612 612"><path fill="currentColor" d="M612 116.258a250.714 250.714 0 01-72.088 19.772c25.929-15.527 45.777-40.155 55.184-69.411-24.322 14.379-51.169 24.82-79.775 30.48-22.907-24.437-55.49-39.658-91.63-39.658-69.334 0-125.551 56.217-125.551 125.513 0 9.828 1.109 19.427 3.251 28.606-104.326-5.24-196.835-55.223-258.75-131.174-10.823 18.51-16.98 40.078-16.98 63.101 0 43.559 22.181 81.993 55.835 104.479a125.556 125.556 0 01-56.867-15.756v1.568c0 60.806 43.291 111.554 100.693 123.104-10.517 2.83-21.607 4.398-33.08 4.398-8.107 0-15.947-.803-23.634-2.333 15.985 49.907 62.336 86.199 117.253 87.194-42.947 33.654-97.099 53.655-155.916 53.655-10.134 0-20.116-.612-29.944-1.721 55.567 35.681 121.536 56.485 192.438 56.485 230.948 0 357.188-191.291 357.188-357.188l-.421-16.253c24.666-17.593 46.005-39.697 62.794-64.861z"></path></svg></a><a aria-label="Discord" href="//discord.gg/NWkQnfH" rel="noopener noreferrer" target="_blank" title="Join our discord" class="hide-for-small"><svg width="22" height="22" viewBox="0 0 245 240"><path fill="currentColor" d="M104.4 103.9c-5.7 0-10.2 5-10.2 11.1s4.6 11.1 10.2 11.1c5.7 0 10.2-5 10.2-11.1.1-6.1-4.5-11.1-10.2-11.1zm36.5 0c-5.7 0-10.2 5-10.2 11.1s4.6 11.1 10.2 11.1c5.7 0 10.2-5 10.2-11.1s-4.5-11.1-10.2-11.1z"></path><path fill="currentColor" d="M189.5 20h-134C44.2 20 35 29.2 35 40.6v135.2c0 11.4 9.2 20.6 20.5 20.6h113.4l-5.3-18.5 12.8 11.9 12.1 11.2 21.5 19V40.6c0-11.4-9.2-20.6-20.5-20.6zm-38.6 130.6s-3.6-4.3-6.6-8.1c13.1-3.7 18.1-11.9 18.1-11.9-4.1 2.7-8 4.6-11.5 5.9-5 2.1-9.8 3.5-14.5 4.3-9.6 1.8-18.4 1.3-25.9-.1-5.7-1.1-10.6-2.7-14.7-4.3-2.3-.9-4.8-2-7.3-3.4-.3-.2-.6-.3-.9-.5-.2-.1-.3-.2-.4-.3-1.8-1-2.8-1.7-2.8-1.7s4.8 8 17.5 11.8c-3 3.8-6.7 8.3-6.7 8.3-22.1-.7-30.5-15.2-30.5-15.2 0-32.2 14.4-58.3 14.4-58.3 14.4-10.8 28.1-10.5 28.1-10.5l1 1.2c-18 5.2-26.3 13.1-26.3 13.1s2.2-1.2 5.9-2.9c10.7-4.7 19.2-6 22.7-6.3.6-.1 1.1-.2 1.7-.2 6.1-.8 13-1 20.2-.2 9.5 1.1 19.7 3.9 30.1 9.6 0 0-7.9-7.5-24.9-12.7l1.4-1.6s13.7-.3 28.1 10.5c0 0 14.4 26.1 14.4 58.3 0 0-8.5 14.5-30.6 15.2z"></path></svg></a><div class="has-dropdown"><a aria-label="github" href="//github.com/rchain/rchain" rel="noopener noreferrer" target="_blank" title="Rchain @ GitHub"><svg width="20px" height="20px" viewBox="0 0 438.549 438.549"><path fill="currentColor" d="M409.132 114.573c-19.608-33.596-46.205-60.194-79.798-79.8-33.598-19.607-70.277-29.408-110.063-29.408-39.781 0-76.472 9.804-110.063 29.408-33.596 19.605-60.192 46.204-79.8 79.8C9.803 148.168 0 184.854 0 224.63c0 47.78 13.94 90.745 41.827 128.906 27.884 38.164 63.906 64.572 108.063 79.227 5.14.954 8.945.283 11.419-1.996 2.475-2.282 3.711-5.14 3.711-8.562 0-.571-.049-5.708-.144-15.417a2549.81 2549.81 0 01-.144-25.406l-6.567 1.136c-4.187.767-9.469 1.092-15.846 1-6.374-.089-12.991-.757-19.842-1.999-6.854-1.231-13.229-4.086-19.13-8.559-5.898-4.473-10.085-10.328-12.56-17.556l-2.855-6.57c-1.903-4.374-4.899-9.233-8.992-14.559-4.093-5.331-8.232-8.945-12.419-10.848l-1.999-1.431c-1.332-.951-2.568-2.098-3.711-3.429-1.142-1.331-1.997-2.663-2.568-3.997-.572-1.335-.098-2.43 1.427-3.289 1.525-.859 4.281-1.276 8.28-1.276l5.708.853c3.807.763 8.516 3.042 14.133 6.851 5.614 3.806 10.229 8.754 13.846 14.842 4.38 7.806 9.657 13.754 15.846 17.847 6.184 4.093 12.419 6.136 18.699 6.136 6.28 0 11.704-.476 16.274-1.423 4.565-.952 8.848-2.383 12.847-4.285 1.713-12.758 6.377-22.559 13.988-29.41-10.848-1.14-20.601-2.857-29.264-5.14-8.658-2.286-17.605-5.996-26.835-11.14-9.235-5.137-16.896-11.516-22.985-19.126-6.09-7.614-11.088-17.61-14.987-29.979-3.901-12.374-5.852-26.648-5.852-42.826 0-23.035 7.52-42.637 22.557-58.817-7.044-17.318-6.379-36.732 1.997-58.24 5.52-1.715 13.706-.428 24.554 3.853 10.85 4.283 18.794 7.952 23.84 10.994 5.046 3.041 9.089 5.618 12.135 7.708 17.705-4.947 35.976-7.421 54.818-7.421s37.117 2.474 54.823 7.421l10.849-6.849c7.419-4.57 16.18-8.758 26.262-12.565 10.088-3.805 17.802-4.853 23.134-3.138 8.562 21.509 9.325 40.922 2.279 58.24 15.036 16.18 22.559 35.787 22.559 58.817 0 16.178-1.958 30.497-5.853 42.966-3.9 12.471-8.941 22.457-15.125 29.979-6.191 7.521-13.901 13.85-23.131 18.986-9.232 5.14-18.182 8.85-26.84 11.136-8.662 2.286-18.415 4.004-29.263 5.146 9.894 8.562 14.842 22.077 14.842 40.539v60.237c0 3.422 1.19 6.279 3.572 8.562 2.379 2.279 6.136 2.95 11.276 1.995 44.163-14.653 80.185-41.062 108.068-79.226 27.88-38.161 41.825-81.126 41.825-128.906-.01-39.771-9.818-76.454-29.414-110.049z"></path></svg><span class="hide-for-small" style="margin-left:5px;">v0.1.0</span></a><div class="dropdown"><a href="//github.com/rchain/rchain" rel="noopener noreferrer" target="_blank">Core Repository</a><a href="https://github.com/rchain-community" rel="noopener noreferrer" target="_blank">Rchain Community</a><a href="https://github.com/tgrospic/rnode-client-js" rel="noopener noreferrer" target="_blank">RNode Client</a><a href="https://github.com/fabcotech/rchain-toolkit" rel="noopener noreferrer" target="_blank">Rchain Toolkit</a><a href="https://github.com/rchain-community/rchain-wallet" rel="noopener noreferrer" target="_blank">RchainWallet</a><a href="https://github.com/imphila/Capo" rel="noopener noreferrer" target="_blank">Capo Mobile App</a><a href="https://github.com/dimworm/rui" rel="noopener noreferrer" target="_blank">Rui锐 Chrome Wallet</a><a href="https://github.com/rchain-community/rchain-community.github.io" rel="noopener noreferrer" target="_blank">Rholang Website</a></div></div></nav></div></header><div class="container flex flex-align-top"><div class="sidebar"><h3 class="menu-item">Tutorials</h3><a href="/tutorials/" class="menu-item menu-link">
            Beginners Tutorial
          </a><a href="/tutorials/sending/" class="menu-item menu-link">
            Sending
          </a><a href="/tutorials/receiving/" class="menu-item menu-link">
            Receiving
          </a><a href="/tutorials/names-and-processes/" class="menu-item menu-link">
            Names and Processes
          </a><a href="/tutorials/send-and-peek/" class="menu-item menu-link">
            Send and Peek
          </a><a href="/tutorials/join/" class="menu-item menu-link">
            Join
          </a><a href="/tutorials/unforgable-names/" class="menu-item menu-link">
            Unforgable Names
          </a><a href="/tutorials/bundles-interpolation/" class="menu-item menu-link">
            Bundles Interpolation
          </a><a href="/tutorials/state-channels" aria-current="page" class="menu-item menu-link active--exact active">
            State Channels
          </a><a href="/tutorials/object-capabilities/" class="menu-item menu-link">
            Object Capabilities
          </a><a href="/tutorials/additional-syntax/" class="menu-item menu-link">
            Additional Syntax
          </a><a href="/tutorials/pattern-matching/" class="menu-item menu-link">
            Pattern Matching
          </a><a href="/tutorials/data-structures/" class="menu-item menu-link">
            Data Structures
          </a><a href="/tutorials/recursion/" class="menu-item menu-link">
            Recursion
          </a><a href="/tutorials/game-example/" class="menu-item menu-link">
            Game Example
          </a><a href="/tutorials/off-chain/" class="menu-item menu-link">
            Off Chain
          </a><a href="/tutorials/cheat-sheet/" class="menu-item menu-link">
            Cheat Sheet
          </a><h3 class="menu-item">Rho Lambda</h3><a href="/tutorials/introduction/" class="menu-item menu-link">
            Introduction
          </a><a href="/tutorials/boolean/" class="menu-item menu-link">
            Booleans
          </a><a href="/tutorials/church/" class="menu-item menu-link">
            Church Numerals
          </a><a href="/tutorials/linked/" class="menu-item menu-link">
            Linked List
          </a><a href="/tutorials/notation/" class="menu-item menu-link">
            Notation
          </a><a href="/tutorials/conway/" class="menu-item menu-link">
            Conway
          </a></div><section class="section doc-content flex-fit"><div class="section--inner container container-base"><div class="post mb"><h1 id="state-channels"><a href="#state-channels" aria-hidden="true">#</a>State Channels</h1><p>By now you're good at sending data to the tuplespace, and receiving data from the tuplespace. But whenever you're computing, you occasionally need to set data aside to be used later. Almost every programming language has a concept of variables.</p><h2 id="holding-on-to-data"><a href="#holding-on-to-data" aria-hidden="true">#</a>Holding on to data</h2><p><img alt="Variables are so 2015. It&amp;#x27;s all about state channels now." src="data:image/svg+xml,%3csvg fill='none' viewBox='0 0 1348 915' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-a9af0a6578fd38008ac3150a5c4f79e0'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-a9af0a6578fd38008ac3150a5c4f79e0)' width='1348' height='915' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAArCAYAAADIWo5HAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAQhklEQVRo3tVaCVRUV5q%2brygQil1ARAXZEWTfkZ2CYt%2bhgCoW2V0CSAsqKqARFHGPu4bEqE1cokk0LonTJqczySQ56Zzu9MTRnrQ93ZO2j52TzGTSc06mY3zz3cdf%2bKBBIVvb95zvvFdVb7n/f///%2b5dbjE1/KIASoAKYBcwBfGS/ewCedJ4LCPR7iuwaYZJnC1OcwwxgLTAPaKT3JQELgDIgjeZpGPy6vUC8TIZpD8PkZgN76MU5gBugA%2bqAWKAQ8APK6YUJQBhQD6iBYHoOn3AinfPrUuncCGgDKoEImbL1gCldwwXcArgDq4AGuraLFGCY73iFGrPvYZiRUM5AJk3%2bGvAusB4oBfKByzSxfydlDAFPAQOABR1fBXqBV4Amen4B8A7wLD3jbTry%2b63oGi8gmZTZQfeGkzUOAjbsRxoZQDfQAnSSUqwBRxKaW4QGsKQJ%2bgPZgAlQTMIG07GATNuRrqkgRfuRtSySvXchsA5YDASS20WSRbSQlfJroum76bjXtIYDCf1txsPMkbtKOimAu1kNKUYuiPEk3MDIwrjfO8ms5nsbSmAJad2M/DiTfpsPuNK5LQkQQqY5XnDu0/tkfi/ICMpsnLCmMuEmIuUfdfBJrSbz5ia4BggiwTmR9ZPZO9ORKyEPmDvOWhxplX/Ief7gw44UsRTYRUzcDJwldtaRkK3AYVp1RhzwDz0MZjeLwl4asTFf1QBa9RJia64keyCLiCqQPv9dzHfKw8jIaMSOhBFLSkhIYC0tLayhoYEVFxcLw8PDgqOjo5KUMBVhiigf%2bNHMc3rxLCNDOs6cOVPo6uoShoaGhJMnTwqiKDKObdu2TdXvBFKGPBERKJwpH2u79vf3f5hQXBGK4eGfmhcVFXqVarXxoWHh3PTzYS0Wjxs5TXvMnj17JMYplQlpaWnhBw8e9D53etjn7bffdn3llVe816xZk9rY2FhcVlbWkpGZuSMqMvJNb0%2bPI25u7sXGxsZS6DMzMxOmKPDjp4QtW7ZIk4qLiyusq6vdFBsbuz0mUb0vLj7%2bMs5/kapOeS85VfP7%2buzY%2b9srIsXNtRliUID/R1XV1dU%2bXp5SkhIQECBMkDPw4U0RIVnGGdNVguIHjf179%2b6VJpSToQkKDI24VqaJEc82hIn9dZlieUWFqNfpxMrKSgl6vf6v/BgSGvp6d3d32sKFC6X4HhMTI0ySLfI8YDfwHPC0LAo8PpZQW1srHX19vB1T1KmHK8pKxaPLs/76VGP6vd7anHvlZWXflI3gPnCPKyAiIuKt02fOREBwKd8uKiqSP9KEiqJCCo%2bDVAztoTJ5OispUO7/GhVGLRNdZGFhIXh5eQne3t7MyclJ%2bs7d3Z0hWj36DfPnz5eO1tZWVuCAI3kFheLupsx7q6rzRG1Z%2bf3ycklwCVqt9h6sQITgN3p7exPz8vK4iUvhUbaq/IEiJUg8Q3ySEiaOqmkowIRc6SRwn575q/H3Ojg4jLmJRy64s4JHNYVCwSwtLR/RYZgxmmqrMjMyjnEFrKvNv9delf9Nibb8fgXcgEOn093nq19fXy/Gx8eL%2bfn5JRhhE%2bTvjlQirwR6SBHV5A41lP8/NBWhI%2b87/Bz4JSmvXVZDSMNcpTK80yMu1M851NX%2bb6T18fExMjExESZS1vhVsIiIjNxdWFAg1lZX3i/TVUr%2bD%2bE/g6B/yc3N5YJ/ERISchtW8/LWrVvD29rasmUFj5LNnKOQ%2bf9MyhS7qHyOpaaF9SN4wECgp2nVOXZSpXiIskz5daG%2bvr77FobFnAuMiD2SV6zVFhbkRwiCwlGubG4Nj9K4U1h4%2bEp1ctL95pzor3D8FAq5GODv379o0aLu1NTUtU1NTXk7duyIunTpkv/hw4cz161bl0D1vPn4h/GJyRodQVTr85rAd4qszwU%2bT9xhGJ74Ve7YAvy/LRSk3J4bLlYl%2bP53iJ/Xh5HR0S/CTfeBq3rc3NyaDK07c3PzMS/SjuugzFu%2bbFlsVVVVp6uHZ2tcbOwKCN2OTHE9fHwtrKArKSnpucjIyOMqleo0cuUPodXLmrTUrZZWVj/jDRKFrZM8ozJlCmWEZPaCohaoxHxDSQEzpqgE7mJ/AM54ipegXcGFyu2RFpWp6cqgoKBz3l5eN042x4svr8wQG3RFYlKKWoyKivwav32JOd8EQUrFGD6PMQPeyRmm5gFDUsPVo0/XaKCHpU8GBga%2bgTzgiouLyydg1D/b2tp%2bAW3/xd7e/i586o9kmt/YOcy6GxYUcNNUZX6HeUe/w9KbO1hQagx78nXDexZQcyNR1qWZKgkyMv9LpLR0YaaJhTBSeP0EC/FmclLSBV//wBcTwvzfyYiPvKPOyEbI1ouoXcTExEQRid5VToxSpPP9W%2bPjStjOQxbSWq4IN6x43fLly9eDSa8jrHzo4eHxH35%2bfjfnzJnzOeL%2br0EqH7u5u5/FJN5gZpafswT9B8bZy44rbRwOsnl%2bq1ly9WZWsraLJeh2sOjC7cwzvI3N8%2b1kzn5LmdJk0djekOnYZX/gpwoZoTYzc6MNyjj7eJNa1wKlxvGCYr6K9xKbUbA9D5wxViq/ik9KOQFcCAkOuhAWFnYR5v%2bZq6vrFzB7KfQ6OztPSr7x1IgcJpZWgeRsoIQK5Ai7wfaDSPoGsrKydkM5jeCBiMaly0dcx2Z2sqDf1McO/GaAHfq4nS05oGVOXlUsJCOKZbdsYTs/6GMnP2tkp/93PTv1ZQPTrq9iroFSR9jS1Vea0AwTE3br1q2JZ6Yy2gChl6ieDisyGwhowrFDdTTs/IyV3i8JtsY8PJ5UmZvvxOLcDg0Jvu67YMGvYe53w8PDn0fEOjRv3rwzcpeZqGuskHEXb0dzu/2AGpO2UIQf2L8csT%2bE%2bMKJqrtAanaGSsw%2bx%2bs4Wzy4iz3zSQ87/Nt2lrdiDyvsPMf2fHiQvSQOsbNfvYBjB7spprJ1F6vZ16LioQWTUuD9g3WKMJseW7G0zOJ6QuaMVT5Pmj0VfMr8dNSwccGcIaw8d41qzPESFunmggULvkLiI9rZ2f0J0eoQlPASXFUrsbuTk6FKfVQIlsIXT1tv4AUXyT2uUhv7n/DdIWAtxWTeAuMavg68BVxgju4XWFr9U6zlma1s6JPj7Jk7R9jGa5sVq870Glf2lSrVNXmqrKYOJzevJ2wsLRJkewIjuym5I4miYKRYFui1cMnMfI86i0%2bzC816/KpN%2bxb2mZ%2bPeclsMOCYwt28V%2br%2bKlgo3NQOq94Pcn4XeA/J2WFY6R4ILbkb3Fc5TnAf4qXRBqbHBN1W3ta6wpkdAg9w0I7MckpHWyhR0UvRxEipxjV%2b1Ja2YzHFWrb/5rNs/cWO8NCQ9aX5uQP5GZqNORnphzM1aQNpqakD4Jg1SMKkPQGNRjPGClSW5oWa5LSeOXr/MtX/5SWpDoZqLS7GrrP6V80Z699nNRqF2qyg8CjS0RkkvQhFWQsyvxwQn50knK2tvAVnT4T6BSVWo%2b3k47KenULmHzwEbaI%2b/%2bKp1hYW8Fxh5XAhuyKusk0p1%2btKigZ1lVWbKvSVHZXV1VV19Q0hzc1LfBcvXpwNYuJKZEizx%2bQldvZ2uRlqTadDa2COxe30Wqsb6XqrjzTtlu%2bmDFndztQrEx0aqQ/JCy0Ryv9PqjciJpjSLNrD%2bC8KqWmGxRZkW1W/IrOWZ2dBZOJ/omhhsBIFmZQhE5ttpBCqzEyUOZSlebDmA9Xsoli3IDa1RldetqO0rLwGQm4CFgOdQDvqinSY52KqJXhBw/r6%2bkao38lRnZqo7rN/IqDB4o%2bZ9dYfaTKtfpdZY/2HrHIbsaTCpMplUBZSeT2yFfiaLOIG8ARtqGwA7lA63TERBxgEtiZTOiLL1OaSG4jU6BxN9BTCAxJVGilau4sWrRhuzW2uTAjQudiYbrMoaq9kR%2b/GRMXG1el0FYMQuA7YD2wFtnMllJaWJiNc6Q3VJG/NgcQkcrS0sixPS07ttgqevcHik8wcy%2bNR%2bar9Ictm/MSrS5np%2bIJgZ/I6VYfcejfzdgaR9C5Z%2bvwl8B7tJdrLZHaZLBVmtPHxBu3tcX44B/yZl/zyqCE8UNyCBF/nrn/b2dD9fGtue782Nvf9nqKYoaP7cgue6KhMVac0Ixz1Q%2bA24GB5eXkfIsoaZJvFIKqCqKio5VQzMCQ1PFVVUHdKD2I7ZmNjs0tyQ2MQsSAlQ9dJ8OeoUPot8Dta9SiaEzf3e%2bS%2bAeN2j2qoLpm8/0em8zmwn6qvT2V5veJoUwZrSAkcTWXOryzUv95d3r%2b6JCkdidKxyCC/TSVxgcsygt3XhQX4Ful0%2bi0wd77yXVjpLuQTG5OTk9cgzd6I0JVlUADvQgvCqGnNQeV2tbCwsN/by/vnttY2d0xNTX%2bD7%2b/SgvwLbayeJYX8gipQB6pCr42Tj7sm7%2b7WPqohY7CGQFr1g8DHMk0qdlalsPf6q6UPt3Y1mL62VrvkypqSFT8bWDo/ICh4MD0jc6M6NW1HcFDQG6jJ90HoToS3nrS0tDYI3Q3GH8B3PUhedtFGJm/Fj%2bYFmzdvHsmDTUy2eXp5XUa0OIFi7AIY/pdg97eAN5G2c0XcJgvlu8f/TIooot3nl2VRLpO4YJls%2b25K9bgRkcdlIkRJAfPtrdiFzmLpwwvtBcorXaURl1aX5ItnV/OVDJw507ZLrVY3IBG5DJZ/H6tYB%2bHbITwvpvpSUlJ6kZN3QIiNhjpECv20HwHBFWQR8biuqaCgYBXu3494vwlh7QQUcMrMzOxZyiH43E5Rx8iQZh8gF8mi31bLSuhpDRVlha8RyYzwH528urZUOl7tKjWCFcwbbiuQ6nwvTw97CDuIld4Hc9%2bGLO0AkpOt2dnZe2EJe0JCQnrJteZOYo6jnSVra%2buC5ubmfPBIY01NTQFcaSWKtKtQXp7MXXeRXxt2gzvIMo5Q/8H4IX%2bceOTghPgR1fKjJGgQ/tUu7UT3zAUXFC5durS6oqIiC5PPBfGp6%2brqonU6XTRWuJX%2bNzBhVSgriJQgxnTcUwnBNyJqbIESDqEYuyWznIlGE1mB63dtxyuJZW9Sa3v0Qa%2bu1Y5aAT%2bHFTDXWTaGBiW35VpYwSokO22Y/HKgHoVV9qxZs5bIJjZpXg7BDVqogv/XQoFroYj%2bnJyca0hx9z5kR8pQPueO6xp96/8D8CTif6i3N2Y8UIJWbgmGSVjAT3sSEhIwd70G1aQ%2bOjq6yRCCjAwOP9k/KIyNFXRdGUJjvIuLSxcixk53d/fz%2bFxN3R0FiHSi2y9T//F72UeIJ43qp2FKBuGCUZm9CB8OwOrHg8DKRzLlUSEnvBlWMtrwgcArGxoakkGEi0tKStanp6f3gFjfpXbZmOghE/h92f8PfvxdaKyKYfW0iAZnYLpL6%2bvrtZj4BmqM8kRnUgswJEOIAh3w9%2bcRAfpApo141tagoKC37O3tuwwc8iBtGDOelVWZ31kBhrx/SiSCSsxwnRNK02NYvX4QV1xra6sPjiWurq6nqMvDFTThM6GcUWOA1TThnqdhCSc8PT33IwSqp0hsRuzvMebONUQ2VhocHHwCq3cN4fBkYmLiTmR/Q/7%2b/j/Fb23gh2/9TxHq7wkPsYDHYvC82w8hLxBKCYBlLKROkhslJSYPIcDRFcbqC4aGZmdnp%2bDh4aGQRYrvNMH/B8n6VaFehZnBAAAAAElFTkSuQmCC' /%3e%3c/svg%3e" width="1348" data-src="/assets/static/state-channels-variables.0a0a24b.0707b7c0928f4014c1ba8f4877d3ab4d.png" data-srcset="/assets/static/state-channels-variables.82a2fbd.0707b7c0928f4014c1ba8f4877d3ab4d.png 480w, /assets/static/state-channels-variables.cbab2cf.0707b7c0928f4014c1ba8f4877d3ab4d.png 1024w, /assets/static/state-channels-variables.0a0a24b.0707b7c0928f4014c1ba8f4877d3ab4d.png 1348w" data-sizes="(max-width: 1348px) 100vw, 1348px" class="g-image g-image--lazy g-image--loading"><noscript><img src="/assets/static/state-channels-variables.0a0a24b.0707b7c0928f4014c1ba8f4877d3ab4d.png" class="g-image g-image--loaded" width="1348" alt="Variables are so 2015. It&#x27;s all about state channels now."></noscript></p><p>Another way in which rholang is unique is that it doesn't have traditional variables. Instead, we can just use the tuplespace to store our data. Whenever you want to set something aside for later, just send it on some channel and receive it back later. Channels that are used in this way are called &quot;state channels&quot;, and often have <code>Ch</code> at the end of their name</p><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">new</span> <span class="token class-name">result</span><span class="token punctuation">,</span> boxCh <span class="token keyword">in</span> <span class="token punctuation">{</span>
  <span class="token comment">// To save data we just put it in the box</span>
  boxCh<span class="token operator">!</span><span class="token punctuation">(</span><span class="token number">42</span><span class="token punctuation">)</span>
  <span class="token operator">|</span>

  <span class="token comment">// Then to get data back out</span>
  <span class="token keyword control-flow">for</span> <span class="token punctuation">(</span>data <span class="token operator">&lt;</span><span class="token operator">-</span> boxCh<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Do whatever you want with the data here.</span>
    result<span class="token operator">!</span><span class="token punctuation">(</span><span class="token operator">*</span>data<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><p>What data gets sent to <code>@somePublicChannel</code>?</p><ul><li class="task-list-item"><input type="checkbox" disabled="disabled"> 0</li><li class="task-list-item"><input type="checkbox" disabled="disabled"> box</li><li class="task-list-item"><input type="checkbox" checked="checked" disabled="disabled"> 42</li><li class="task-list-item"><input type="checkbox" disabled="disabled"> It is empty</li></ul><p>What data is left in the <code>boxCh</code> state channel?</p><ul><li class="task-list-item"><input type="checkbox" disabled="disabled"> 0</li><li class="task-list-item"><input type="checkbox" disabled="disabled"> @&quot;somePublicBox&quot;</li><li class="task-list-item"><input type="checkbox" disabled="disabled"> 42</li><li class="task-list-item"><input type="checkbox" checked="checked" disabled="disabled"> It is empty</li></ul><h2 id="persisting-data"><a href="#persisting-data" aria-hidden="true">#</a>Persisting Data</h2><p>If we were to check the box again, we would not get a result. Because once we receive the message, it gets consumed from the tuplespace. We briefly discussed the solution back in our lesson on persistent sends and peeks.</p><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">new</span> <span class="token class-name">boxCh</span> <span class="token keyword">in</span> <span class="token punctuation">{</span>
  <span class="token comment">// To save data we just put it in the box</span>
  boxCh<span class="token operator">!</span><span class="token punctuation">(</span><span class="token number">42</span><span class="token punctuation">)</span>
  <span class="token operator">|</span>

  <span class="token comment">// To check the value without consuming it</span>
  <span class="token keyword control-flow">for</span> <span class="token punctuation">(</span>data <span class="token operator">&lt;</span><span class="token operator">-</span> boxCh<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// We send a copy back to the box</span>
    boxCh<span class="token operator">!</span><span class="token punctuation">(</span><span class="token operator">*</span>data<span class="token punctuation">)</span>
    <span class="token operator">|</span>
    <span class="token comment">// The do whatever with it</span>
    @<span class="token string">&quot;somePublicChannel&quot;</span><span class="token operator">!</span><span class="token punctuation">(</span><span class="token operator">*</span>data<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><p>What data gets sent to <code>@somePublicChannel</code>?</p><ul><li class="task-list-item"><input type="checkbox" disabled="disabled"> 0</li><li class="task-list-item"><input type="checkbox" disabled="disabled"> box</li><li class="task-list-item"><input type="checkbox" checked="checked" disabled="disabled"> 42</li><li class="task-list-item"><input type="checkbox" disabled="disabled"> It is empty</li></ul><p>What data is left in the <code>boxCh</code> state channel?</p><ul><li class="task-list-item"><input type="checkbox" disabled="disabled"> 0</li><li class="task-list-item"><input type="checkbox" disabled="disabled"> @&quot;somePublicBox&quot;</li><li class="task-list-item"><input type="checkbox" checked="checked" disabled="disabled"> 42</li><li class="task-list-item"><input type="checkbox" disabled="disabled"> It is empty</li></ul><h2 id="patience-game-revisited"><a href="#patience-game-revisited" aria-hidden="true">#</a>Patience Game Revisited</h2><p>A few lessons back we discussed the patience game, where each player hopes to be the last one to send a message to the contract. We had some problems back then because we couldn't guarantee that a result of the game would ever be output.</p><p>Take a minute to remind yourself of the problem we had. With a state channel, we can solve this problem properly.</p><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">new</span> <span class="token class-name">result</span><span class="token punctuation">,</span> <span class="token constant">P1</span><span class="token punctuation">,</span> <span class="token constant">P2</span> <span class="token keyword">in</span> <span class="token punctuation">{</span>

  <span class="token comment">// active gets its own scope so players can't change its value.</span>
  <span class="token keyword">new</span> <span class="token class-name">active</span> <span class="token keyword">in</span> <span class="token punctuation">{</span>
    active<span class="token operator">!</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
    <span class="token operator">|</span>
    <span class="token keyword control-flow">for</span><span class="token punctuation">(</span>_ <span class="token operator">&lt;</span><span class="token operator">-</span> active<span class="token punctuation">;</span> _ <span class="token operator">&lt;</span><span class="token operator">-</span> <span class="token constant">P1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword control-flow">for</span><span class="token punctuation">(</span> _ <span class="token operator">&lt;</span><span class="token operator">-</span> <span class="token constant">P2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        result<span class="token operator">!</span><span class="token punctuation">(</span><span class="token string">&quot;P2 Wins&quot;</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token operator">|</span>
    <span class="token keyword control-flow">for</span><span class="token punctuation">(</span>_ <span class="token operator">&lt;</span><span class="token operator">-</span> active<span class="token punctuation">;</span> _ <span class="token operator">&lt;</span><span class="token operator">-</span> <span class="token constant">P2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword control-flow">for</span> <span class="token punctuation">(</span>_ <span class="token operator">&lt;</span><span class="token operator">-</span> <span class="token constant">P1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        result<span class="token operator">!</span><span class="token punctuation">(</span><span class="token string">&quot;P1 Wins&quot;</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token operator">|</span>
  <span class="token constant">P1</span><span class="token operator">!</span><span class="token punctuation">(</span><span class="token maybe-class-name">Nil</span><span class="token punctuation">)</span>
  <span class="token operator">|</span>
  <span class="token constant">P2</span><span class="token operator">!</span><span class="token punctuation">(</span><span class="token maybe-class-name">Nil</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre><p>How does the above code avoid the problem of each block getting called once?</p><ul><li class="task-list-item"><input type="checkbox" disabled="disabled"> By forcing player one to use the top block</li><li class="task-list-item"><input type="checkbox" checked="checked" disabled="disabled"> Because after the first call <code>activeCh</code> is empty</li><li class="task-list-item"><input type="checkbox" disabled="disabled"> Because state channel make things sequential</li></ul><h2 id="objects-and-methods"><a href="#objects-and-methods" aria-hidden="true">#</a>Objects and Methods</h2><p><img alt="This click-counter can be incremented and reset" src="data:image/svg+xml,%3csvg fill='none' viewBox='0 0 306 299' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-0a431e9a1be6e1d17e58523a225382db'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-0a431e9a1be6e1d17e58523a225382db)' width='306' height='299' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAA/CAYAAABQHc7KAAAACXBIWXMAAAsSAAALEgHS3X78AAAdBklEQVRo3rXbC9ilY9UH8DkQxXTQSQenmlQqJJRKyLEmSSFRmkhyKEIadCBnSUrOp6QUSlSoRKmoQSincZwxhjEf0zTDGPPuvZ/n%2b/9uz/1eL%2bnTV3qv67n2fvd%2bDvf6r//6r3Wv%2b96jRv17f6NzjO2OMd3//9ff1jmuzXFnjrNybDDyy7ZtV7366quP/slPfnL%2b97///T%2bdeuqpU4455pg7jzzyyGsPOuigXxx44IHH5nXnb33rW2/LuUuOvPbrX//62OnTp5f355xzzqhrr7121H/zrxr%2bVH/jciw/ZsyYVXOslffr51g3xz5szNEfPXp0272/N8cJOdbJsevGG288e9ttt2233nrr9mMf%2b1j7gQ98oN1ss83aD37wg%2b1WW23VfuQjH2k333zz8t3uu%2b8%2b/bOf/exZO%2b6444SAMaY%2b/Nvf/vbwuK666qr/ivEjDX9Fjq1yHAD4HDfEuIdGGFiOAHF/Prsjrwu7zwbdMa2es9xyy516xhlnzDjllFPaH//4x72f//zngx/96EeDsGFw3nnnDfJZ/8ILLxz62c9%2b1jv55JObr371q%2b1ee%2b3VfuITn2gPPvjgm/L99nVQb3rTm8Y%2b8MAD5f0RRxzxjHq9Ir1CjpNy3JXjEQZ0Rj%2baY0qOy57znOecN27cODQ/N8c3c1yco1lkkUXmvf71r2%2bWXHLJoc54oDyc/x86%2buijF1x%2b%2beVtjG/OP//8NoA0MbYNKM2ZZ57Z/PCHP2xD7yZANBdddNHge9/7Xi9h0d9pp53az33uc%2b0Xv/jFa84%2b%2b%2by16oD33XffYWb8pyExMrY/1hnZz3FNjhM9CxNi3Bah7R6f%2bcxnzsigrvjoRz865f3vf//sUHrw%2bc9/fugd73jH0Kte9aq5q6%2b%2bumCdCoBcA7w5eT87r/N222239rvf/W4bDWh%2b%2bctftvF4G0OB0ca49qc//akDQM2ll15awIom9BMOPWwQJtttt92%2bdbC53yIJkfL%2bmmuu%2bY9ZcHqOWTn%2bJ8d%2br371q5%2bf1z1f9rKXXbrGGmvcmth85IADDmi/9rWvtRGrNvGIzu0f/vCH9ne/%2b10bOrff/OY32/32229GPHf4uuuuu3sA%2bEPYMivhISR6Ae3mG264YXD66ae3EcHCBNcFEExoMcI9L7vssjah0V5yySXN73//%2bwJSnt3bYYcd2gkTJrSrrbbaOTF88erACsK/w4RKo%2bM7r/997NixV4/4fucI1/xtttmmoJ%2bB9//0pz/1brrppr74zf8NCp977rk82oTigyh2%2b%2bUvf5lHbznppJMOWWqppW55zWteM/TsZz/7sQAz99e//vUg2aANzRtex4Jc797Dx1lnndVeeeWV7QUXXNBGK5o//vGPQqNNxmgikL3111%2b/xbQAv89/AkI1Xlz14yWev7l%2b%2bYtf/GKVo446aod4%2bn4enzhx4mDttddu11prrWb77bdvMpgy0AywxHOoXT06SHrrhwntIYcc0h566KGPfuELX5j/ile8AjvaK664AjgN1qA5j8fLTYxtTjzxRJ73fkAXAlSDBRgSpnnf5t5NBLK34YYblkwyefLkScZ7%2bOGHFwHPGP5lEKrin9yp9uS3vvWtq91zzz0T/5y/GNbPTRnQBogG9b3feeedWx4IDdvQvN17773bTsDaH/zgB424Fcuh7WCfffYZ7Lnnnq309%2bIXv7iJkGFJMZ5n0RwLAkJz3XXXCaUBjfjtb3/b3nrrre0tt9zS3n333W0MAnYT8Jo4psWyCGP/3e9%2b9wA7Z86cuVWXGhd5Wj1YZ511ht/HmwTweoIVcfvZtGnTbrrttttagyFSoWvPQw04g2p%2b85vftJQcNQ0igoQR7UYbbST%2bhULLc7/61a8YSrmbT37yk02AbaIFYrwJSMVgRl188cXOL%2bBhzo033tjmmBd9OD%2bid3M047Fddtml%2bc53vtNcf/31BeiMoRE2Cac24tj3/DxnKCGwCpv%2b%2bte/jv2noZBBPu76sWOL8i%2b%2b%2bOIvycvfXvrSlxajCU48MHTaaaf1DdaB3lQbvcUh43kBlb0mvbUf/vCH27e97W3FYJSm6scff3zzqU99SmEjLTZvfOMbAVrYEQOL0QGqhAHvOh/Axx133CkZ03UBjeAtlGXcO/eZHw8/DGQguB778oze29/%2bdmDeFRCey66ExZinBOF973tffVuo8qxnPWurxH773ve%2bt0%2bceC0Xt2KPUBEiisxT6AoE6IfmJXaBga4GE6o3vJHUNAiAA2krgyveVyOEYQAsccxoih9jyz0AQ/zCgr%2b9/OUvv4rgJuQGqQSLbiQEVZD9SZMm3Rot6Asb1%2bR6othGD4b22GOPdurUqReyKyweXcNgOBxy0/K60korFXSSw8cvscQScxdbbDEeHOSGbRT%2bkQxucgbaY2AG1FRvA8fAiR7aGrgw4RFGBZjmS1/6ksE0oe4gA2uiEYqjJsVRCSH0D50NvqRPRh977LHuX/QggD8aEO8kbhgRo0oIBcyFMkvAnJznTxEKccZAzYB1gIomDYUh7c033zypM/wf9SAPHzWipLxSHR569iJWxePx3KPxzAKDrCmOp/I5gStMCEiFGbzgPMAIDfkcCGJTSKy88sq9CB9xbVO1lftHS0rqEwKABCDREwKU32cB9JJcc0lYWdLepz/9aSCUQuh5z3velRnDpcaSsOwrmIwPUNG2hh133XUXsNftQuCJc5p4e5Hu7Y7UOelp6LnPfW77jW98A/UbdCY2OYoqEyqewgIDl6YULMnhbQqa4klexAzpCmuoO29l8oP6g4Ch9i8iyUO5Z4lfz3S%2beyigcg8eBebfE8tL59pLwyRzgn7G2agioyMPxqN/dx0HYYKU6nnOTXbqE9I8477UDkt1IIweNX78%2bJEl7xKvfe1rp6Ft8vkgN5XTG%2blG7PMSr6KsAQMiylpeMSDFTYldNQA2dCmqhAFgGMvjidkmFSQD5tx5551DQkWajAFtBldCx71cl1d1BCf0aU48e1rYM4PXA3qTOqRRha6yyioDwskpQgTYrku6nh2Aeu9617uE51BSuXv9/AkhkNK2en%2b/DJCBQ4mdxkWEhqh0k5NCbUqO%2boyrYsfr6K809blz6ueucZ464CUveUm79NJLN0lTbTTHIBcCkKFSmoFLrf7PvcpnMo1iKLV/qTXe8IY3FOMVUwFgYMqccJ22wgorzKFJwJRyhV7A6GU%2bgm1SY3P77bcPcVqM36xYnHgqwpdqbHxEZg70482%2bWVY%2bm7Lppps%2bzLseyAgHI8UqkXIAA3WxAzO6Wr3U8WIZG8Sm2Zu4p8pJkY1Y3mCDDUq1J4xOOOGExn27WV8BUhgB8itf%2bUqbFL0ghs5fdtll20ywmhe%2b8IWNNJ05ST9OfDgTrhKqCirzkYQnIMr0OVmiiS2FrQqpALDByI7MopttttlfeDuo9aS0UHkotcD8HCUuUwCWuBLTqM3b4p9h2IGyXp3LaKLFkwwQv86NAZocihU1REuYEgpFHBntHjzuGvMHPQC0jQ4sAF4YsyBzh0diaBuDm6h78853vrONYbJLScXmHsbnPh34pQIVGjlnQc6ZEwAO6WqCx0M/ovOu1AFipI8%2bPJfX/iabbDJA2RVXXLHh6VqhMUis/uUvfymfKVKAEw%2b2aCpUeM9ngCJMChIlcidSFL4UOFtuuWXp/CiPzQIBimGUP4Oel/P%2blv/vl%2b%2bV2woc3uSsCGCb9NocfPDBJe6BhvaEGpOxBu2T1gdhDNbMSHm8cXV80zSjav7fRzGiI8N4KkpAxFMo2nQNjMaExyAYwIMQpqwRsjaxhVbFQLRzvfOAwztJU0ULUN0ziCVj999//yZ1ewEvgA3ioT4xc290BTYQpTWqLhSFh4kRYzGLRqG7SViMbdZbbz0MaV/0ohe1z3/%2b80vYJZwH48aNky3mRNtWYvfrXve6xxmQL88XxzEK5VCx4ekIGBEavOc972mFAhDcLNNXN2wVMebgEZlSkQkBwEhjmZmp/NpUb21itXxOG5xj4J6Xo3jcoCNudzFaqk24DTDL8zO9blK9lfHwsFTZTYexsmQAxY5JWMQVW4vhL3jBC9pMtz27yXibV77ylb4fSrZQNO3K7re85S2lFhgXatyrjI1XBuKQB00xeQoLQvUBo4jIMsss84S%2b35MPnR7oOzrkSy6PUSW9EdGaGhkgPjEnXn9ztGiNGHgjEOJ9aa3ojmdT%2bhQ0RTRlAaEJ3DimrU7RnmO0V2W8z%2blON47GWJLm2zBgjQ6AkgDWSkVVREj97Mj7AUAygNuiqlehs2Zl15crnkyZ2dINhiqYHMnPbWhVBqqriwFEkdFAVdjUTOI%2bwkEjxRwj9f0xGcsmMezPagR5narzqvsCNuV5qzzn5WSD1veMwsxFF110OFSdCwBAuCbzmibX9JMtAHdQ7XkEgPJmF9PXxFiP8ShKpQEQCt4bQbtCaqKqaIcRYtAhvlGT4rvusMMO054q4sPb5uydMhcAvNa4BSrQCaZGBp2oRiZuG8Amr5fwQWcaIoYdvG0eAYR8Vw33XQEs15VZpuvRP2A0%2ba7vPnVNItc/XgrHc9/qVH%2bIMBmoQRIW%2bVusJizM4opyEznC5Dzh4nOiJSPwaletlfqg5vCuLC3nY4Trsch0WtbhgJw/lPw%2bFF0ZGKiB5/9i0JPb7bUbzesYEdY1mb808WjJWDwt1n1GBLEhAPRoQ679aHH/mDFjCwNCoYvEoxSoeDBQiqug0ZtLWit1gKqsSzHFqNqvY5QYZxDPmhMoebEGAMAFQP3fq8%2bcQwTdN/WA9NkkPhuhxCDFDk9rlhCyvBZjiZlXXl1%2b%2beVLNymhsDAF0WM1BByYoW8Qypf/c27PtXm/R9f3eJwByy233FVobZ4uBLoOTPG%2btNN9VtSaMDIa3QHF80BBY%2byRv53nHPdxnnOkP5QHVn3FEqHjfLlaiy2TJFRviJsKj%2bBm0I2wcMSDBaBO%2bBosEC4jFlkaGQk4Ob9Zc801i/gJl4DZE0a55rAnAJATLgvdF/IMY3mLSOkAdfRXmanRy4B53veYgPbqAFrA83K5a%2bgDALqytugEllF/oDgPEMLJTJFumLtH6cVr8Xin3k1NZd4DJDXDsMEBjYPKeVtssUWjRlEGf%2bhDHyrfC4cIYBXDAoBVtBoCBYBQ6JLE7Rx5GgBdFVZimVEGyihepuKoKwQUKV55WF4GTKqxwoRaLdZJkTkCjwsRxsv3vgOS69QM6vWPf/zjReykKspPyMSwV0Zizrx58zQ6irfdj44k3gGgHmjyeekvCgEiKHSEUj7vpYwmnud22jcm4TFqVE68KAOczdAYMKgFCy96YC1efK/8rToAJJ93GaKcTxjpCFoLK2D6rLbKGO5/AwdcLZeBYnZoJkqoDFwYiH9iWJVfSBJI1%2bk6G5%2b2vPKYcXqQKara2bNnlxQNvFonBNie2iH6cRkA8pzHW/%2bhxvfjsXldU6OkJSLFUA/wyquMEBY8i84GTdRq9wdQ1RjMwQ4hU3UBo9zLK42gMQzBLvfBAG0zhlNxR6hL4Ar1Kb5UrGYhnoyymqwlX8tdlSmAam0CFEdXo/TVKGHTZHZnDItkbKPlw6MMUOvZdDRGlFQHhJEAGLhYBxCqGzSDAYPKgAACRmCB68wcgeN7RnsvXLzHJte7t%2b%2bt%2bpqP6BBLZ9KfPK/QIWQM1A/UG8CQJ6dF2uGoAAKD6gullVde2ed99wuQU57cEd%2bFQTq/ZlQGAwCeQXGx63txzSAeZggqdyu6xdPVUJ8zyv8Y43/A1ImQ%2b/A8hmATsHxnLsG7vEQAGcPraoGu/O7VuYhXxsgMsgWwxo8f36666qrFeEY7j4BiRO5TUuvqq6/u/DkJ572mTJmyRcJ2CQBM0DcLJQdysSYko%2buCZM31jKuDxxia4DxiiObOxRrvgeSgA673GW%2b7Xlao77EKWK4FBB1Q5xMy8S%2bVETEAJIb7UiTDgMLTPIshlF6sM94rQBhO/f0PCOdYhxA2njtt2jRtvj%2bXjljK0Ee0rmhAna3xXDdvb7tOcBl4t4Rdl60KADTB5wSUsTSAYUSP4AkL98MgIYMRngEg4FawdYr0DQgh0ePhbi5Qih6xTBd4G0BCwbnYIHuIfd52jd6Dw6qx0NUYkSnUCAG7nzK9x%2bbSEM5Db2ZIBjEAQteCHk6BtXgxUEc3lS0McBOMYGAFoDZHeVsY1P8ZX9cLHL4DTq0SCaHiBQsYF7rydFH%2bhEVJhTwvxfGseYKKEROAxWATJRqiaarEVsfQlkzO9Dib2FrqDR2izFD7RQRCnbMZkzTUV%2b/Xmr8a5WB4rQsYibJSX%2b37C43q6TpPAKSpLrCc3y1dFcC6ynK4wYplqjjpzWyS0ehdPWyi5JWB9AEjeBtQYpvaa4/xuP6A9%2buvv35j6WyjjTZqNt9888HEiRNb64lbbrllWYhVyFUh3NWcO1rQ1xCpOzMYXbs7te9vsKjLWEbL5%2bb6FRierLNDVFczOK8rlUvHV99O%2bwt4NKeCLJ/rOSiEKDjj0blOt%2bXxlVZaqYikyU4nbqrDsuCy/fbbl70KGjj%2bJ6o77bRTYYD2WSrFputrlAXVOGd%2bBeAtuXhuvNSYmipPDbjSHhsAwGivBKzrFJf4J5B10uN8se47zNCC9n3X8iorQIBxnsIGaBU4nWhxSs1NZMS6iY8mKGOlSHQnkpiiba%2bfqIJ0WJG26MpYLfMY23Sd6YVxyu21/b7tttv27r//fqn4wgrAEom7K%2bLd%2bTKCQQKAEVJgbYV7X2nOkzVlUtWukizel%2bu9Bw6adX3GMsvEngAx3HytjVAhoOdvZul485vfXJbXGaq6M1HSFeLZjsolZOrWnNqRxkglOwdlntKYq9x00029fDeL16MNeoe9e%2b%2b91zi3HhVRqbtBjorRC6CnUeFm6F5nedScUUCpuz9q757xYtx5enkA0Q8wGBrgGt63YNn1B8oCSFc5FiA8CwPcQzrkQYb5bNdddy1VIlHzPTFVg6gm3Z8Qa77QF8Z3DZfCtLCx7ElwjaXz6IJus9CcEWeMG94Os8EGGxwLzaDf23///YuBhLHO8mrrGwi1QqzdICB4b5GTxzGGF10DDO9HdJHKwLo027i3CY1XHmW0VvnUqVMLmHWfAEN5U0gx2CGLGIfvKvCejWkYCmiGsyPPHag2Eya9WbNmWcA58vGdTjvvPKbbP3MZetn%2bQjjoAZEyUN6su74Y7wCMm1ejHQblwWqE2hNAbezgsY4BZaub%2b3fpryyEAEljhBO0x6zeCA2NGff2HCm026NQxFUVWh0h7JyrVFZh8jpm5f0jGcv9nLHeeusNABQQF8aWFQsAoVGZFz/44IOflD5C%2bV4GUdbza3HDO2LMg7vu8XCxw0BAGZwHE7daHjPMdVhTvdPNBZpu/18JNQxAb8xTC9gSaynb%2bRhAvHgZc%2bqiKwAYD2jOkYncWx0D7IBXltTzjOkZ4/RJkyYBdmjmzJnE76xucXTsqFw4cuPx7wiMxYnk06bO%2bHicEfVBPMxQ32OH7xgKlNpTFC6MdG1dJnd9Htp02eKhxH1PvJrlWd1BUWHAEQDgWWBiAO3gUU4AgNdaoLl3zrGNpunmGU03j5mZrPaozBBRbeiDtYYwZeUOgMf1Lzcrq8Opj/dGvwx86MADD2ySl8tgGVUzAo9Rd5/XNUAGVpbwkgcBATgG5D1DeNQao/vl/IcDwEIhgwGaHJbi7U3YbbfdbGZoOlaVxRH6AVAO4H3MqOkXKxiGgdr3WJp7T88zzsZkLfb99tuveD/Gnzbs/bpZKDctSMybN29dN0zZWBYlklttgWuqgbULXKe2QCBEvMNAzOg6SwUUil23vTq32/5SmIVBMWBgWkwHGC5vywAJgwIAI2UkANS9SF0BM7wPCbi8X%2b9jc7XnhR3nJZRv0B5LvWADp%2bsejrOXHd4cUQFIOhiV6WEB4Z577jlHBXX44YcPMQYIdbXIwOv0ljEGWGleJ02YAiAeMziiBRiChroGXZuvtMPuE2DI61pjtr2oRYSA9T5elc%2b9drm9UN69AezVZ7bXVdDz/sY47gILM6bBef7Q9OnTxf6%2bI/cIPWGnWJApADzwwAPLxqPz1OMxcIBC6ucqaJ3nipFAYJRXqItnmcL/1WDvhY5Bi1uVGBAtiVnr4zlLZOLeVhkadNhhhz0aAGYCOEYPZBehRNwwgAM8z5iIqzWMjGfQVaOnJ7tcHEGdax6QGqJnV0jC5Ob8DRv%2bhA1SFYmcUOJizpw526H6hAkT%2brbGYITNRqiNynX/bl0GrwWPKq8qcxWrDrAy8bCiq%2bcgLLTehQ/AjjjiiDKJ0epSy%2becWXPnzt0%2bnnzMPVWmmOUZQJbXpVJhgCWKqi5E5gbYkyKmAyWynWjWGDEk49loZOz/wz5BiMQ4QliYkFr5OJOTIFi2mCkh875sU/EwRtZYl8/rLhH5VrHC%2bK5vUDZVWW6rACZdlfUFoDBI9Sn281lfuRuWXNO27fiAeyuP0wpA190nlugs2gDAZEo3S5jlvvYil53jOsUBeajz/ikjjX/K7bIVkSA1/BuB6MKvVGWh5EKG0YMUTo01QF5H49pKN9NT12OAwdEGuoCi6v6uJ0D1H%2boaJSUtCSuzNaGGIer%2b3HdOtGGhe9k%2bA2Qiy/NdjVHm89rf7gXUfHZfnvOAuJfywqq%2brk%2bMn5oQWnKk8P3TDdP1i9TVY7qtM4tlIJPt5UmclgFts802jRoBO%2bpEqNsRXhuidatLOewntMegY8oPknGuJ35WoLuF0TJtpRPON3dX13c7y5quhVaqOsLqmd3SXNNtmX8s4XF7wDgqLJpnhpj5wyDOKyzMsfbIfYFPu1u80uPuu%2b8e24EwLg%2b82pw79B8yGEIFBFvjg3TTzRJVXkXglKMGT7nRtesJDoXyU3kMU1CaUWoFJbBz1R3E8I477ii/M6h1PIDVG8LFeQoeIec3RXmdnOffEuMf1jVOCh1Ey3oAiC17PFn1nxaAkSfNmDGjgrBYQLjcYsNBBx1k01Jj7m3OEDAAgcaKjYENTxoPdoHp9Krw8nkprXlQqDCcMDLe95jAMF2c2kZDa4wDALB8VjtKMgkAwhI/qurZL2RrfO7F%2bCHbdRLKx9Vqr6r%2bv/yDiZEgRAwrCOYN59nfH5raoTlQYmKB3M1z%2bnDEUnNCPe8AkB1eNkzbgYIRDBIqprnUnRZglettySdoFQDvZRTUF/91gqVQA4LVJM%2bwETsA98wiE7VnjbBl9L/1k5mRuTK1wfCvsELPo9Xr9ukl1w5MYIijwyovRedxxYzFSstV9acuBE/MYwNwlL886xp7fGSFbqm%2b1BF1XREQWllmjBiT5xfQMU96zvk9GSJjA9bJ/7HxT8WEkSA89NBDexic3Vjxbp8XkxlKvYARPGtWxzt1O5uWd/cbgdK3k/a6Iqv8qAKowHKNgx4oj73aFZ6QK4dt9naWdRmA4T271KTLGL/nM2b8U4GQtDI6MTmmmz5PNAmRdjbccMOFmW72QlfVWNmuZuAAQWv0tnILFKKp8coAvwYNU0pIRLnLHmIAZULmVbbpB6BemNKLAPeiAX6l0oux/cR62ZqnbxDDrwztV%2b9i3u8Bnhnjnyo7pHT1o4OiC6mwNg3tHpOTpUVb5jQcw4ZeGNKn0mZzXcqy8tzTj1Ps2LKy5ppr9mxkDiMUQL0IaS8UH4oolt8kEDyTGNSW08U3o30Wox/J8cscW44Y49g6zv/Kb4jrTROTjC8gpMZfNd44LGJ5QoCYRaB4miqbiWlzA0ZBhfqm21tsscV8qQ/l67YcxvImQ02EUk02KWBuSRV5dIw6JB7%2bRo6vxeDP5/8JGcuyT2LpmH851T0TIHRV4xN%2bdJCy84UJjY/cd999p6WYuR4gAWh%2bYvXvMfDOGHXhggULdkhGWWb27Nm7xqOnpN44Lx7%2baQC9IPc%2bM0YemtCamGtXDlvGPs1YRitwRv4E5v9r/P8CsEst2LpvQBAAAAAASUVORK5CYII=' /%3e%3c/svg%3e" width="306" data-src="/assets/static/state-channels-clickCounter.b9b0341.54a512a70aa1c39cb702b6ddb8f35a21.png" data-srcset="/assets/static/state-channels-clickCounter.b9b0341.54a512a70aa1c39cb702b6ddb8f35a21.png 306w" data-sizes="(max-width: 306px) 100vw, 306px" class="g-image g-image--lazy g-image--loading"><noscript><img src="/assets/static/state-channels-clickCounter.b9b0341.54a512a70aa1c39cb702b6ddb8f35a21.png" class="g-image g-image--loaded" width="306" alt="This click-counter can be incremented and reset"></noscript></p><p>In &quot;Object Oriented Programming&quot; languages such as java, we can model real-world objects by encapsulating some data along with methods that use or change the data. The same thing is possible in rholang.</p><p>In this example, we'll create an object that represents a basic click counter. The ingredients are:</p><ul><li>State Channels: currentCount</li><li>Methods: increase, reset</li></ul><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">new</span> <span class="token class-name">result</span><span class="token punctuation">,</span> currentCount<span class="token punctuation">,</span> increase<span class="token punctuation">,</span> reset<span class="token punctuation">,</span> check <span class="token keyword">in</span> <span class="token punctuation">{</span>
  
  <span class="token comment">// Starting the counter at 0</span>
  currentCount<span class="token operator">!</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">|</span>

  <span class="token comment">// Method to increase counter (returns the old value)</span>
  contract <span class="token function">increase</span><span class="token punctuation">(</span>ack<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">for</span><span class="token punctuation">(</span>old <span class="token operator">&lt;</span><span class="token operator">-</span> currentCount<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      currentCount<span class="token operator">!</span><span class="token punctuation">(</span><span class="token operator">*</span>old <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">|</span>
      ack<span class="token operator">!</span><span class="token punctuation">(</span><span class="token operator">*</span>old<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span> <span class="token operator">|</span>

  <span class="token comment">// Method to reset the counter (returns the old value)</span>
  contract <span class="token function">reset</span><span class="token punctuation">(</span>ack<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">for</span><span class="token punctuation">(</span>old <span class="token operator">&lt;</span><span class="token operator">-</span> currentCount<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      currentCount<span class="token operator">!</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">|</span>
      ack<span class="token operator">!</span><span class="token punctuation">(</span><span class="token operator">*</span>old<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

  <span class="token punctuation">}</span> <span class="token operator">|</span>

  <span class="token comment">// Increase the value three times</span>
  <span class="token keyword">new</span> <span class="token class-name">ack</span> <span class="token keyword">in</span> <span class="token punctuation">{</span>
    increase<span class="token operator">!</span><span class="token punctuation">(</span><span class="token operator">*</span>ack<span class="token punctuation">)</span> <span class="token operator">|</span>
    <span class="token keyword control-flow">for</span><span class="token punctuation">(</span>_ <span class="token operator">&lt;</span><span class="token operator">-</span> ack<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      increase<span class="token operator">!</span><span class="token punctuation">(</span><span class="token operator">*</span>ack<span class="token punctuation">)</span> <span class="token operator">|</span>
      <span class="token keyword control-flow">for</span><span class="token punctuation">(</span>_ <span class="token operator">&lt;</span><span class="token operator">-</span> ack<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        increase<span class="token operator">!</span><span class="token punctuation">(</span><span class="token operator">*</span>ack<span class="token punctuation">)</span> <span class="token operator">|</span>
        <span class="token keyword control-flow">for</span><span class="token punctuation">(</span>_ <span class="token operator">&lt;</span><span class="token operator">-</span> ack<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          increase<span class="token operator">!</span><span class="token punctuation">(</span><span class="token operator">*</span>ack<span class="token punctuation">)</span> <span class="token operator">|</span>

          <span class="token comment">// And check it's value afterwards</span>
          <span class="token keyword control-flow">for</span><span class="token punctuation">(</span>_ <span class="token operator">&lt;</span><span class="token operator">-</span> ack<span class="token punctuation">;</span> count <span class="token operator">&lt;</span><span class="token operator">-</span> currentCount<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            result<span class="token operator">!</span><span class="token punctuation">(</span><span class="token operator">*</span>count<span class="token punctuation">)</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> 
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><h3 id="exercises"><a href="#exercises" aria-hidden="true">#</a>Exercises</h3><p>It is inconvenient to manually replace the counter value each time I check it. Instead we should have a method for that.</p><h3 id="exercise"><a href="#exercise" aria-hidden="true">#</a>Exercise</h3><p>Now that it's easier and safer to check the counter, let's write some better tests that actually check all the methods.</p><h2 id="factories"><a href="#factories" aria-hidden="true">#</a>Factories</h2><p>If you've programmed in other languages like java you may be familiar with constructors. If you haven't programmed in in java, that's great, because Rholang uses factories to make new objects rather than constructors.</p><p>The counter is a useful construct in rholang, and you'll likely find that you use it in your projects. The problem is that many projects may want to use counters, and having just one is insufficient. So the solution is to make a factory contract that makes counters. When the factory contract is called, it sends back a brand new counter.</p><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">new</span> <span class="token class-name">result</span><span class="token punctuation">,</span> counterFactory <span class="token keyword">in</span> <span class="token punctuation">{</span>
  contract <span class="token function">counterFactory</span><span class="token punctuation">(</span>increase<span class="token punctuation">,</span> reset<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token keyword">new</span> <span class="token class-name">currentCount</span> <span class="token keyword">in</span> <span class="token punctuation">{</span>
      <span class="token comment">// Start the counter at zero</span>
      currentCount<span class="token operator">!</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">|</span>

      <span class="token comment">// Method to increase counter (returns the old value)</span>
      contract <span class="token function">increase</span><span class="token punctuation">(</span>ack<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token keyword control-flow">for</span> <span class="token punctuation">(</span>old <span class="token operator">&lt;</span><span class="token operator">-</span> currentCount<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          currentCount<span class="token operator">!</span><span class="token punctuation">(</span><span class="token operator">*</span>old <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">|</span>
          ack<span class="token operator">!</span><span class="token punctuation">(</span><span class="token operator">*</span>old<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
      <span class="token operator">|</span>

      <span class="token comment">// Method to reset the counter (returns the old value)</span>
      contract <span class="token function">reset</span><span class="token punctuation">(</span>ack<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token keyword control-flow">for</span><span class="token punctuation">(</span>old <span class="token operator">&lt;</span><span class="token operator">-</span> currentCount<span class="token punctuation">)</span><span class="token punctuation">{</span>
          currentCount<span class="token operator">!</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">|</span>
          ack<span class="token operator">!</span><span class="token punctuation">(</span><span class="token operator">*</span>old<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token operator">|</span>

  <span class="token keyword">new</span> <span class="token class-name">ack</span><span class="token punctuation">,</span> myIncrease<span class="token punctuation">,</span> myReset <span class="token keyword">in</span> <span class="token punctuation">{</span>
    <span class="token comment">// Demo using the counter here</span>
    <span class="token maybe-class-name">Nil</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><p>How would a user call the factory to get a new counter?</p><ul><li class="task-list-item"><input type="checkbox" disabled="disabled"><code>counterFactory!(*ack)</code></li><li class="task-list-item"><input type="checkbox" disabled="disabled"><code>counterFactory!(0, *ack)</code></li><li class="task-list-item"><input type="checkbox" disabled="disabled"><code>@&quot;counterFactory&quot;()</code></li><li class="task-list-item"><input type="checkbox" checked="checked" disabled="disabled"><code>counterFactory!(myIncrease, myReset)</code></li></ul><p>How would a user reset their counter after creating as indicated above.</p><ul><li class="task-list-item"><input type="checkbox" disabled="disabled"><code>myIncrease!(*ack)</code></li><li class="task-list-item"><input type="checkbox" checked="checked" disabled="disabled"><code>myReset!(*ack)</code></li><li class="task-list-item"><input type="checkbox" disabled="disabled"><code>counterFactory!(myReset, *ack)</code></li><li class="task-list-item"><input type="checkbox" disabled="disabled"><code>counterFactory!(myReset)</code></li></ul><h2 id="method-dispatching"><a href="#method-dispatching" aria-hidden="true">#</a>Method Dispatching</h2><p>There are two primary techniques for making methods available. The first option I call &quot;separation of powers&quot; because each method listens on its own dedicated channel.</p><p>Another option is the &quot;control panel&quot; technique where there is a single unforgeable name called the control panel and all the methods are built on it.</p><pre class="language-javascript"><code class="language-javascript"><span class="token comment">// Separation of Powers</span>
contract <span class="token function">factory</span><span class="token punctuation">(</span>method1<span class="token punctuation">,</span> method2<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  contract <span class="token function">method1</span><span class="token punctuation">(</span>ack<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token spread operator">...</span> <span class="token punctuation">}</span>
  contract <span class="token function">method2</span><span class="token punctuation">(</span>ack<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token spread operator">...</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// Control Panel</span>
contract <span class="token function">factory</span><span class="token punctuation">(</span>cPanel<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  contract @<span class="token punctuation">[</span>cPanel<span class="token punctuation">,</span> <span class="token string">&quot;method1&quot;</span><span class="token punctuation">]</span><span class="token punctuation">(</span>ack<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token spread operator">...</span> <span class="token punctuation">}</span>
  contract @<span class="token punctuation">[</span>cPanel<span class="token punctuation">,</span> <span class="token string">&quot;method2&quot;</span><span class="token punctuation">]</span><span class="token punctuation">(</span>ack<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token spread operator">...</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><p>Which technique did the counter example use to dispatch methods?</p><ul><li class="task-list-item"><input type="checkbox" checked="checked" disabled="disabled"> Separation of Powers</li><li class="task-list-item"><input type="checkbox" disabled="disabled"> Control Panel</li></ul><h3 id="exercise-1"><a href="#exercise-1" aria-hidden="true">#</a>Exercise</h3><p>Convert the counter example to use the other method dispatching technique. You should convert the tests too.</p></div><p><a href="https://github.com/rchain-community/rchain-community.github.io/tree/source/content/tutorials/state-channels.md" target="_blank" class="github-edit-link"><svg width="16" height="16" viewBox="0 0 438.549 438.549"><path fill="currentColor" d="M409.132 114.573c-19.608-33.596-46.205-60.194-79.798-79.8-33.598-19.607-70.277-29.408-110.063-29.408-39.781 0-76.472 9.804-110.063 29.408-33.596 19.605-60.192 46.204-79.8 79.8C9.803 148.168 0 184.854 0 224.63c0 47.78 13.94 90.745 41.827 128.906 27.884 38.164 63.906 64.572 108.063 79.227 5.14.954 8.945.283 11.419-1.996 2.475-2.282 3.711-5.14 3.711-8.562 0-.571-.049-5.708-.144-15.417a2549.81 2549.81 0 01-.144-25.406l-6.567 1.136c-4.187.767-9.469 1.092-15.846 1-6.374-.089-12.991-.757-19.842-1.999-6.854-1.231-13.229-4.086-19.13-8.559-5.898-4.473-10.085-10.328-12.56-17.556l-2.855-6.57c-1.903-4.374-4.899-9.233-8.992-14.559-4.093-5.331-8.232-8.945-12.419-10.848l-1.999-1.431c-1.332-.951-2.568-2.098-3.711-3.429-1.142-1.331-1.997-2.663-2.568-3.997-.572-1.335-.098-2.43 1.427-3.289 1.525-.859 4.281-1.276 8.28-1.276l5.708.853c3.807.763 8.516 3.042 14.133 6.851 5.614 3.806 10.229 8.754 13.846 14.842 4.38 7.806 9.657 13.754 15.846 17.847 6.184 4.093 12.419 6.136 18.699 6.136 6.28 0 11.704-.476 16.274-1.423 4.565-.952 8.848-2.383 12.847-4.285 1.713-12.758 6.377-22.559 13.988-29.41-10.848-1.14-20.601-2.857-29.264-5.14-8.658-2.286-17.605-5.996-26.835-11.14-9.235-5.137-16.896-11.516-22.985-19.126-6.09-7.614-11.088-17.61-14.987-29.979-3.901-12.374-5.852-26.648-5.852-42.826 0-23.035 7.52-42.637 22.557-58.817-7.044-17.318-6.379-36.732 1.997-58.24 5.52-1.715 13.706-.428 24.554 3.853 10.85 4.283 18.794 7.952 23.84 10.994 5.046 3.041 9.089 5.618 12.135 7.708 17.705-4.947 35.976-7.421 54.818-7.421s37.117 2.474 54.823 7.421l10.849-6.849c7.419-4.57 16.18-8.758 26.262-12.565 10.088-3.805 17.802-4.853 23.134-3.138 8.562 21.509 9.325 40.922 2.279 58.24 15.036 16.18 22.559 35.787 22.559 58.817 0 16.178-1.958 30.497-5.853 42.966-3.9 12.471-8.941 22.457-15.125 29.979-6.191 7.521-13.901 13.85-23.131 18.986-9.232 5.14-18.182 8.85-26.84 11.136-8.662 2.286-18.415 4.004-29.263 5.146 9.894 8.562 14.842 22.077 14.842 40.539v60.237c0 3.422 1.19 6.279 3.572 8.562 2.379 2.279 6.136 2.95 11.276 1.995 44.163-14.653 80.185-41.062 108.068-79.226 27.88-38.161 41.825-81.126 41.825-128.906-.01-39.771-9.818-76.454-29.414-110.049z"></path></svg><span>Edit this page on GitHub</span></a></p><nav class="docs-nav"><div class="docs-nav__previous"><a href="/tutorials/bundles-interpolation/" class="button  button--small docs-nav__link">
            ← Bundles Interpolation
          </a></div><div class="docs-nav__next"><a href="/tutorials/object-capabilities/" class="button  button--small docs-nav__link">
            Object Capabilities →
          </a></div></nav></div><!----></section><div class="sidebar sidebar--right hide-for-small"><h3>On this page</h3><ul class="menu-item submenu"><li class="submenu__item submenu__item-depth-2"><a href="#holding-on-to-data" class="submenu__link">
            Holding on to data
          </a></li><li class="submenu__item submenu__item-depth-2"><a href="#persisting-data" class="submenu__link">
            Persisting Data
          </a></li><li class="submenu__item submenu__item-depth-2"><a href="#patience-game-revisited" class="submenu__link">
            Patience Game Revisited
          </a></li><li class="submenu__item submenu__item-depth-2"><a href="#objects-and-methods" class="submenu__link">
            Objects and Methods
          </a></li><li class="submenu__item submenu__item-depth-3"><a href="#exercises" class="submenu__link">
            Exercises
          </a></li><li class="submenu__item submenu__item-depth-3"><a href="#exercise" class="submenu__link">
            Exercise
          </a></li><li class="submenu__item submenu__item-depth-2"><a href="#factories" class="submenu__link">
            Factories
          </a></li><li class="submenu__item submenu__item-depth-2"><a href="#method-dispatching" class="submenu__link">
            Method Dispatching
          </a></li><li class="submenu__item submenu__item-depth-3"><a href="#exercise-1" class="submenu__link">
            Exercise
          </a></li></ul></div></div></div>
    <script>window.__INITIAL_STATE__={"data":{"tut":{"title":"State Channels ","headings":[{"value":"State Channels"}],"subtitles":[{"depth":1,"value":"State Channels","anchor":"#state-channels"},{"depth":2,"value":"Holding on to data","anchor":"#holding-on-to-data"},{"depth":2,"value":"Persisting Data","anchor":"#persisting-data"},{"depth":2,"value":"Patience Game Revisited","anchor":"#patience-game-revisited"},{"depth":2,"value":"Objects and Methods","anchor":"#objects-and-methods"},{"depth":3,"value":"Exercises","anchor":"#exercises"},{"depth":3,"value":"Exercise","anchor":"#exercise"},{"depth":2,"value":"Factories","anchor":"#factories"},{"depth":2,"value":"Method Dispatching","anchor":"#method-dispatching"},{"depth":3,"value":"Exercise","anchor":"#exercise-1"}]}},"context":{}};(function(){var s;(s=document.currentScript||document.scripts[document.scripts.length-1]).parentNode.removeChild(s);}());</script><script src="/assets/js/app.7683db69.js" defer></script>
  </body>
</html>